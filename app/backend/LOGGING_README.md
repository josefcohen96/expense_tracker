# מערכת הלוגים - הוראות שימוש

## סקירה כללית

מערכת הלוגים המשופרת מאפשרת לך לעקוב אחר כל הפעילות באפליקציה, כולל:
- ניסיונות התחברות
- שגיאות
- בקשות HTTP
- מידע debug
- כל ההדפסות שהיו מופיעות ב-console

## קבצי הלוגים

המערכת יוצרת קבצי לוגים נפרדים:

### 1. `server.log` - לוגים כלליים
- פעילות השרת
- שגיאות כלליות
- בקשות HTTP
- מידע על הפעלת המערכת

### 2. `auth.log` - לוגים של אימות
- ניסיונות התחברות
- הצלחות/כישלונות
- מידע על sessions
- debug של cookies

### 3. `debug.log` - לוגים מפורטים
- כל ההדפסות שהיו מופיעות ב-console
- מידע debug מפורט
- פרטי בקשות
- מידע על sessions

### 4. `errors.log` - שגיאות בלבד
- רק שגיאות קריטיות
- stack traces
- שגיאות מערכת

## איך לצפות בלוגים

### 1. באמצעות הסקריפט המובנה

```bash
# צפה בכל הלוגים (50 שורות אחרונות)
python view_logs.py

# צפה בלוגים של אימות
python view_logs.py auth

# צפה בלוגים של debug
python view_logs.py debug

# צפה בלוגים בזמן אמת (tail)
python view_logs.py auth -t

# צפה ב-100 שורות אחרונות
python view_logs.py server -l 100
```

### 2. באמצעות פקודות מערכת

```bash
# צפה בלוגים בזמן אמת
tail -f logs/auth.log

# צפה ב-50 שורות אחרונות
tail -n 50 logs/debug.log

# חפש מידע ספציפי
grep "LOGIN" logs/auth.log
grep "ERROR" logs/errors.log
```

## דוגמאות שימוש

### מעקב אחר ניסיונות התחברות
```bash
# צפה בכל ניסיונות ההתחברות
grep "LOGIN" logs/auth.log

# צפה בניסיונות כושלים
grep "LOGIN.*failed" logs/auth.log
```

### מעקב אחר שגיאות
```bash
# צפה בשגיאות האחרונות
tail -n 20 logs/errors.log

# חפש שגיאות ספציפיות
grep "Exception" logs/errors.log
```

### מעקב אחר פעילות בזמן אמת
```bash
# צפה בכל הפעילות בזמן אמת
tail -f logs/debug.log

# צפה רק בפעילות אימות
tail -f logs/auth.log
```

## הגדרות לסביבת פרודקשן

המערכת מזהה אוטומטית אם היא רצה בסביבת פרודקשן (Railway) ומפעילה הגדרות מתקדמות:

- **Log Rotation**: קבצי לוגים מתחלפים אוטומטית (מקסימום 10MB)
- **רמות לוגים**: DEBUG בסביבת פיתוח, INFO בפרודקשן
- **קבצים נפרדים**: כל סוג לוג נשמר בקובץ נפרד
- **מידע סביבה**: מידע על הגדרות המערכת נרשם בהפעלה

## פתרון בעיות

### אם הלוגים לא נוצרים
1. ודא שהתיקייה `logs` קיימת
2. בדוק הרשאות כתיבה
3. הפעל את האפליקציה לפחות פעם אחת

### אם הלוגים לא מתעדכנים
1. בדוק שהאפליקציה רצה
2. נסה לרענן את הדף
3. בדוק את קובץ `server.log` למידע על שגיאות

### אם אתה רואה שגיאות בלוגים
1. בדוק את `errors.log` לפרטים
2. חפש ב-`debug.log` למידע נוסף
3. השתמש ב-`grep` לחפש מילים מפתח

## טיפים שימושיים

1. **שמור לוגים**: קבצי הלוגים מתחלפים אוטומטית, אז שמור עותקים חשובים
2. **חפש מילים מפתח**: השתמש ב-`grep` למציאת מידע ספציפי
3. **עקוב בזמן אמת**: השתמש ב-`tail -f` למעקב אחר בעיות בזמן אמת
4. **בדוק את כל הקבצים**: לפעמים המידע נמצא בקבצים שונים

## דוגמאות פקודות שימושיות

```bash
# צפה בכל הפעילות האחרונה
python view_logs.py all

# עקוב אחר ניסיונות התחברות בזמן אמת
python view_logs.py auth -t

# חפש שגיאות ספציפיות
grep -i "session" logs/auth.log

# צפה בפעילות של שעה אחרונה
grep "$(date '+%Y-%m-%d %H')" logs/server.log
```
